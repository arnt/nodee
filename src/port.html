<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html lang=en><head><title>Port documentation</title>
<link rel=stylesheet href="udoc.css" type="text/css">
<link rel=generator href="http://archiveopteryx.org/udoc/">
</head><body>
<h1 class="classh">Class Port.</h1>
<p class="text">The Port class contains a couple of static functions to find free TCP ports on this system.
<p class="text">Nodee needs to find free TCP ports, and cannot use the normal approach since it has to know the port number much earlier. Therefore this class contains some linux-specific /proc parsing to supply the numbers we need.
<p class="text">Now that I write this, I notice a bug. <a href="port.html#assignFree">assignFree()</a> should also look at all the <a href="process.html">Process</a> objects and consider any ports assigned but not yet used as occupied. 
<h2 class="functionh"><a name="assignFree"></a>int Port::assignFree( const set&lt;int&gt; &amp; avoid )</h2>
<p class="text">Returns a free port on this host, avoiding <i>avoid</i> (which is an empty set by default).
<p class="text">Ports used for any purpose are assumed to be used; if a process opens a TCP connection from TCP6 port 1025, this function will never return 1025, even though listening would be legal in most cases.
<p class="text">The range used is 1025-65535; 65535 is returned as a last resort. 
<h2 class="functionh"><a name="busy"></a>static set&lt;int&gt; Port::busy( const char * filename )</h2>
<p class="text">Parses <i>filename</i> as though it were linux' /proc/net/tcp and returns a set&lt;int&gt; of busy ports.
<p class="text">Any port used for any purpose is considered busy, even if the use we have in mind might be able to coexist with the port's current use. The code is simpler that way, there are enough free ports on the system, and differentiating between services is easier on the poor brain of the sysadmin looking at the system. 
<p class="rights">This web page based on source code belonging to <a href="http://arnt.gulbrandsen.priv.no">Arnt Gulbrandsen</a>. All rights reserved.</body></html>
