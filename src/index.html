<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html lang=en><head><title>index</title>
<link rel=stylesheet href="udoc.css" type="text/css">
<link rel=generator href="http://archiveopteryx.org/udoc/">
</head><body>

<p class="text">Nodee uses eight main classes, plus some adjuncts.
<p class="text"><a href="init.html">Init</a> is the mothership. It watches over the running processes. When a new service is started, that always results in at least one new <a href="process.html">Process</a> object, which generally does nothing. The process does something and <a href="init.html">Init</a> watches over it. <a href="init.html">Init</a> has its own thread.
<p class="text"><a href="process.html">Process</a> merely records information about its process... and contains a static function, <a href="process.html#launch">Process::launch()</a>, to launch new processes.
<p class="text"><a href="serverspec.html">ServerSpec</a> is what <a href="process.html">Process</a> uses to remember things about the service. <a href="serverspec.html">ServerSpec</a> does the main json work, decoding and encoding things for the HTTP clients.
<p class="text"><a href="httpserver.html">HttpServer</a> is the process that mostly calls <a href="process.html#launch">Process::launch()</a>. It serves HTTP API requests to start/stop services and calls other parts of nodee to do the work.
<p class="text"><a href="httplistener.html">HttpListener</a> helps <a href="httpserver.html">HttpServer</a> and creates new <a href="httpserver.html">HttpServer</a> objects as needed; <a href="httplistener.html">HttpListener</a> is one of nodee's long-running threads.
<p class="text"><a href="hoststatus.html">HostStatus</a> and <a href="chorekeeper.html">ChoreKeeper</a> look at the host nodee runs on. <a href="hoststatus.html">HostStatus</a> merely tells all comers about the host ("it has umpty-foo gigabytes of RAM"), <a href="chorekeeper.html">ChoreKeeper</a> actually does some work. If the host runs out of RAM, <a href="chorekeeper.html">ChoreKeeper</a> will discover that, find out which service is most likely to make the difference between useful service and thrashing, and kill that.
<p class="text">Finally, <a href="zkclient.html">ZkClient</a> is used by nodee to maintain state information about the host in zookeeper. <a href="zkclient.html">ZkClient</a> uses no less than two long-running threads.
<p class="text">The function main() does most of the setup.
<p class="text">Utility code for nodee comes from boost (1.40 or later) and the C++ standard library (the old one, not TR1).
<p class="text">boost::filesystem changed API between 1.40 and 1.42, which causes some scattered hackage around the nodee source. I (Arnt) think having these turds is preferable to requiring a newer version boost than what Ubuntu LTS offers. 
<p class="rights">This web page based on source code belonging to <a href="http.html://arnt.github.com/nodee/">Arnt Gulbrandsen</a>. All rights reserved.</body></html>
